



<!doctype html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <title>Initializing Blockchain</title>

    <!-- CSS -->
    <link href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css' rel='stylesheet'>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" rel="stylesheet">
    <link href='../_static/main.css' rel='stylesheet'>
    <link href='../_static/style.css' rel='stylesheet'>
    <link href='../_static/doxygen.css' rel='stylesheet'>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

    <!-- Sphinx search -->
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <!-- Transifex -->
    <script type="text/javascript">
      window.liveSettings = {
        api_key: "bbf87af0641e4bbf89c98088d48e0449",
      };
    </script>
    <script type="text/javascript" src="http://cdn.transifex.com/live.js"></script>

    <!-- title card -->
    <link  href='../_static/title-card.css' rel='stylesheet'>
    <script src='../_static/script.js'></script>
    
    <!-- Sphinx search -->
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Graphene Technical Documentation  documentation"
          href="../_static/opensearch.xml"/>

    <!-- Meta -->
    <meta content="Graphene Documentation" property="og:site_name">
    <meta content="Graphene Documentation" property="og:title">
    <meta content="website" property="og:type">
    <meta content="Graphene Documentation" name="description">
    <meta content="Graphene Documentation" property="og:description">
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-68381245-1', 'auto');
  ga('send', 'pageview');

</script>

 </head>
 <body class='no-literate'>


 <div class='title-area title-card' style='background-image: url(https://bitshares.org/images/bg.jpg)'>
   <div class='in'>
     <div class='headline'>
       <h1>Initializing Blockchain</h1>
 
     </div>
   </div>
 </div>

 <div class='header'>
   <div class='left navlinks'>
    
        <div class="prev">
         <div class="title">previous</div>
         <span><a href="2-genesis.html">Genesis Configuration</a></span>
        </div>
        <div class="top">
         <div class="title">top</div>
         <span><a class="uplink" href="../index.html">Contents</a></span>
        </div>
        <div class="next">
         <div class="title">next</div>
         <span><a href="4-cli-wallet.html">Connecting a CLI wallet</a></span>
        </div>

   </div>
   <!--
    <div class='right'>
<div id="searchbox" style="display: none" role="search">
 <form class="search" action="../search.html" method="get">
   <input type="text" name="q" />
   <input type="submit" value="Go" />
   <input type="hidden" name="check_keywords" value="yes" />
   <input type="hidden" name="area" value="default" />
 </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
   </div>
   -->
 </div>

 <div class='content-root'>
  <!-- menu bar -->
  <div class='menubar'>
   <div class='section'>
    <a href="..//index.html"><img src="../_static/grphn-logo.svg" height="48" /></a>

    <a href="..//bitshares/index.html"><img src="../_static/bitshares-logo.png" height="48" /></a>

    <a href="..//muse/index.html"><img src="../_static/MUSE_logo_transp_v1.png" height="48" /></a>
   </div>
   <div class='menu section'>
    <div id="toc">
      <h3>Table Of Contents</h3>
      <ul>
<li class="toctree-l1"><a class="reference internal" href="../bitshares/index.html">BitShares 2.0</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../muse/index.html">MUSE</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../integration/index.html">Integration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Graphene API</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../blockchain/index.html">Blockchain Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../namespaces/index.html">Namespaces</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Public Graphene Testnet</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#public-testnet">Public Testnet</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#how-it-has-been-deployed">How it has been deployed</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="1-install.html">Installation/Confguration of Witness</a></li>
<li class="toctree-l3"><a class="reference internal" href="2-genesis.html">Genesis Configuration</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">Initializing Blockchain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-block-production">Setting up block production</a></li>
<li class="toctree-l4"><a class="reference internal" href="#initializing-the-genesis-block">Initializing the genesis block</a></li>
<li class="toctree-l4"><a class="reference internal" href="#writing-final-genesis">Writing final genesis</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="4-cli-wallet.html">Connecting a CLI wallet</a></li>
<li class="toctree-l3"><a class="reference internal" href="5-committee.html">Establishing a Committee</a></li>
<li class="toctree-l3"><a class="reference internal" href="6-webwallet.html">Web Wallet</a></li>
<li class="toctree-l3"><a class="reference internal" href="7-faucet.html">Setting up the Faucet</a></li>
<li class="toctree-l3"><a class="reference internal" href="8-nginx.html">Nginx Webserver</a></li>
<li class="toctree-l3"><a class="reference internal" href="9-python-library.html">Installation of Python Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="10-create-assets.html">Create MPAs/UIAs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">Frequently Asked Questions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../meta/index.html">How to Contribute</a></li>
</ul>

    </div>
   </div>
   <div class='bottom section'>
   <!--
     <a href='https://github.com/cryptonomex/graphene'>View on GitHub</a><br>
     <a href='https://github.com/cryptonomex/graphene/blob/master/README.md' target='_blank'>See .md source</a>
   -->
   </div>
  </div>
  <div class='content'>
   
  <div class="section" id="initializing-blockchain">
<h1>Initializing Blockchain<a class="headerlink" href="#initializing-blockchain" title="Permalink to this headline">¶</a></h1>
<p>Let the witness generate a new data directly <cite>data/testnet</cite>:</p>
<div class="highlight-sh"><div class="highlight"><pre>programs/witness_node/witness_node --data-dir data/testnet
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Initialization will complete nearly instantaneously with the
tiny example genesis, unless you added a ton of balances.</p>
</div>
<p>The reason for running the witness node:</p>
<ul class="simple">
<li>It tells us the chain ID and</li>
<li>it initializes the <code class="docutils literal"><span class="pre">data/testnet</span></code> directory.</li>
</ul>
<div class="section" id="setting-up-block-production">
<h2>Setting up block production<a class="headerlink" href="#setting-up-block-production" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s edit <cite>data/testnet/config.ini</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre>p2p-endpoint = 0.0.0.0:11010
rpc-endpoint = 0.0.0.0:11011

# private-key = [&lt;pubkey&gt;,&lt;privke&gt;]
# For each witness, add pubkey and private key:
private-key = [&quot;GPH6MRyAjQq8ud7hVNYcfnVPJqcVpscN5So8BhtHuGYqET5GDW5CV&quot;,&quot;5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3&quot;]

witness-id = &quot;1.6.1&quot;
witness-id = &quot;1.6.2&quot;
witness-id = &quot;1.6.3&quot;
witness-id = &quot;1.6.4&quot;
witness-id = &quot;1.6.5&quot;
witness-id = &quot;1.6.6&quot;
witness-id = &quot;1.6.7&quot;
witness-id = &quot;1.6.8&quot;
witness-id = &quot;1.6.9&quot;
witness-id = &quot;1.6.10&quot;
</pre></div>
</div>
<p>This authorizes the <code class="docutils literal"><span class="pre">witness_node</span></code> to produce blocks on behalf of the
listed <code class="docutils literal"><span class="pre">witness-id</span></code>&#8216;s, and specifies the private key needed to sign
those blocks.  Normally each witness would be on a different node, but
for the purposes of this testnet, we will start out with all witnesses
signing blocks on a single node.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The setting <code class="docutils literal"><span class="pre">rpc-endpoint</span> <span class="pre">=</span> <span class="pre">0.0.0.0:11011</span></code> will open up
the RPC-port <cite>11011</cite> to connect a cli-wallet or web wallet to
it. With the <code class="docutils literal"><span class="pre">p2p-endpoint</span> <span class="pre">=</span> <span class="pre">0.0.0.0:11010</span></code> being accessible
from the internet, this node can be used as seed node.</p>
</div>
</div>
<div class="section" id="initializing-the-genesis-block">
<h2>Initializing the genesis block<a class="headerlink" href="#initializing-the-genesis-block" title="Permalink to this headline">¶</a></h2>
<div class="highlight-sh"><div class="highlight"><pre>programs/witness_node/witness_node --genesis-timestamp <span class="m">10</span> --genesis-json genesis/my-genesis.json --enable-stale-production --data-dir data/testnet
</pre></div>
</div>
<p>Several messages will go to the console.  When you see messages like these::</p>
<div class="highlight-python"><div class="highlight"><pre>Started witness node on a chain with 0 blocks.
Chain ID is cf307110d029cb882d126bf0488dc4864772f68d9888d86b458d16e6c36aa74b
</pre></div>
</div>
<p>the initialization is complete, and you can press Ctrl+C to quit the
witness node (the chain id will look differently to this example)</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>It is important that you make note of the following line.</p>
<div class="highlight-python"><div class="highlight"><pre>Used genesis timestamp:  2016-01-20T19:11:30 (PLEASE RECORD THIS)
WARNING:  GENESIS WAS MODIFIED, YOUR CHAIN ID MAY BE DIFFERENT
</pre></div>
</div>
<p class="last">Write down the timestamp as we will need it to construct a proper
<cite>genesis.json</cite> file for others to sync with the network!</p>
</div>
<p>Essentially the <code class="docutils literal"><span class="pre">--genesis-timestamp</span></code> option in the previous step
tells the node to overwrite the time in the file with a timestamp after
startup and use a <em>more recent</em> timestamp for the chainid.</p>
<p>The <code class="docutils literal"><span class="pre">--enable-stale-production</span></code> flag tells the <code class="docutils literal"><span class="pre">witness_node</span></code> to
produce on a chain with zero blocks or very old blocks.  We specify the
<code class="docutils literal"><span class="pre">--enable-stale-production</span></code> parameter on the command line as we will
not normally need it (although it can also be specified in the config
file).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Unless no other witness produces blocks and witness
participation is high enough, subsequent runs which connect to
an existing witness node over the p2p network, or which get
blockchain state from an existing data directory, need not
have the <code class="docutils literal"><span class="pre">--enable-stale-production</span></code> flag.</p>
</div>
</div>
<div class="section" id="writing-final-genesis">
<h2>Writing final genesis<a class="headerlink" href="#writing-final-genesis" title="Permalink to this headline">¶</a></h2>
<p>We now copy our gensis template file over to the grapehen root
directry::</p>
<div class="highlight-python"><div class="highlight"><pre>$ cp genesis/my-genesis.json genesis.json
$ vim genesis.json
$ git add genesis.json
$ git commit -m &quot;Added genesis.json&quot;
</pre></div>
</div>
<p>The genesis timestamp needs to be pasted into <code class="docutils literal"><span class="pre">genesis.json</span></code> file in
the initial_timestamp field. If you do not do this, nodes using the
genesis will have a different chain ID and be unable to connect.</p>
</div>
</div>


  </div>
 </div>

 <script>var HN=[];HN.factory=function(e){return function(){HN.push([e].concat(Array.prototype.slice.call(arguments,0)))};},HN.on=HN.factory("on"),HN.once=HN.factory("once"),HN.off=HN.factory("off"),HN.emit=HN.factory("emit"),HN.load=function(){var e="hn-button.js";if(document.getElementById(e))return;var t=document.createElement("script");t.id=e,t.src="//hn-button.herokuapp.com/hn-button.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)},HN.load();</script>
 <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
 </body>
</html>
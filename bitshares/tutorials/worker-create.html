



<!doctype html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <title>How to Create a Worker</title>

    <!-- CSS -->
    <link href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css' rel='stylesheet'>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" rel="stylesheet">
    <link href='../../_static/main.css' rel='stylesheet'>
    <link href='../../_static/style.css' rel='stylesheet'>
    <link href='../../_static/doxygen.css' rel='stylesheet'>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

    <!-- Sphinx search -->
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <!-- Transifex -->
    <script type="text/javascript">
      window.liveSettings = {
        api_key: "bbf87af0641e4bbf89c98088d48e0449",
      };
    </script>
    <script type="text/javascript" src="http://cdn.transifex.com/live.js"></script>

    <!-- title card -->
    <link  href='../../_static/title-card.css' rel='stylesheet'>
    <script src='../../_static/script.js'></script>
    
    <!-- Sphinx search -->
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Graphene Technical Documentation  documentation"
          href="../../_static/opensearch.xml"/>

    <!-- Meta -->
    <meta content="Graphene Documentation" property="og:site_name">
    <meta content="Graphene Documentation" property="og:title">
    <meta content="website" property="og:type">
    <meta content="Graphene Documentation" name="description">
    <meta content="Graphene Documentation" property="og:description">
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-68381245-1', 'auto');
  ga('send', 'pageview');

</script>

 </head>
 <body class='no-literate'>


 <div class='title-area title-card' style='background-image: url(https://bitshares.org/images/bg.jpg)'>
   <div class='in'>
     <div class='headline'>
       <h1>How to Create a Worker</h1>
 
     </div>
   </div>
 </div>

 <div class='header'>
   <div class='left navlinks'>
    
        <div class="prev">
         <div class="title">previous</div>
         <span><a href="committee-propose-action.html">Howto Propose Committee Actions</a></span>
        </div>
        <div class="top">
         <div class="title">top</div>
         <span><a class="uplink" href="../../index.html">Contents</a></span>
        </div>
        <div class="next">
         <div class="title">next</div>
         <span><a href="worker-budget.html">Claim Worker Pay</a></span>
        </div>

   </div>
   <!--
    <div class='right'>
<div id="searchbox" style="display: none" role="search">
 <form class="search" action="../../search.html" method="get">
   <input type="text" name="q" />
   <input type="submit" value="Go" />
   <input type="hidden" name="check_keywords" value="yes" />
   <input type="hidden" name="area" value="default" />
 </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
   </div>
   -->
 </div>

 <div class='content-root'>
  <!-- menu bar -->
  <div class='menubar'>
   <div class='section'>
    <a href="../..//index.html"><img src="../../_static/grphn-logo.svg" height="48" /></a>

    <a href="../..//bitshares/index.html"><img src="../../_static/bitshares-logo.png" height="48" /></a>

    <a href="../..//muse/index.html"><img src="../../_static/MUSE_logo_transp_v1.png" height="48" /></a>
   </div>
   <div class='menu section'>
    <div id="toc">
      <h3>Table Of Contents</h3>
      <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">BitShares 2.0</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../migration/index.html">Migrating from BitShares 1.0 to BitShares 2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../papers/index.html">Whitepapers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user/index.html">User Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developers/index.html">Businesses, Developers and Business Developers</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Tutorials</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="index.html#general-tutorials">General Tutorials</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#assets">Assets</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#prediction-markets">Prediction Markets</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#committee-tutorials">Committee Tutorials</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html#worker-tutorials">Worker Tutorials</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="">How to Create a Worker</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#how-to-see-proposals-on-the-chain">How to see proposals on the chain</a></li>
<li class="toctree-l5"><a class="reference internal" href="#how-to-vote-for-a-worker">How to Vote for a Worker</a></li>
<li class="toctree-l5"><a class="reference internal" href="#how-workers-get-paid">How Workers Get Paid</a></li>
<li class="toctree-l5"><a class="reference internal" href="#technical-details">Technical Details</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="worker-budget.html">Claim Worker Pay</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="index.html#witness-tutorials">Witness Tutorials</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../muse/index.html">MUSE</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/index.html">Integration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">Graphene API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../blockchain/index.html">Blockchain Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../namespaces/index.html">Namespaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testnet/index.html">Testnets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">Frequently Asked Questions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../meta/index.html">How to Contribute</a></li>
</ul>

    </div>
   </div>
   <div class='bottom section'>
   <!--
     <a href='https://github.com/cryptonomex/graphene'>View on GitHub</a><br>
     <a href='https://github.com/cryptonomex/graphene/blob/master/README.md' target='_blank'>See .md source</a>
   -->
   </div>
  </div>
  <div class='content'>
   
  <div class="section" id="how-to-create-a-worker">
<h1>How to Create a Worker<a class="headerlink" href="#how-to-create-a-worker" title="Permalink to this headline">¶</a></h1>
<p>Workers are currently created with the cli_wallet with the following command
syntax::</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">create_worker</span> <span class="n">owner_account</span> <span class="n">work_begin_date</span> <span class="n">work_end_date</span> <span class="n">daily_pay</span> <span class="n">name</span> <span class="n">url</span> <span class="n">worker_settings</span> <span class="n">broadcast</span>
</pre></div>
</div>
<p>example, <code class="docutils literal"><span class="pre">owner_account</span></code> is creating a one day worker starting Oct 28 and will
get paid 1 BTS/day (vesting in 1 day, 1 BTS = 100,000 &#8216;satoshi&#8217;) to make an
android app. The first command won&#8217;t broadcast, this will just check::</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">create_worker</span> <span class="s">&quot;worker-name&quot;</span> <span class="s">&quot;2015-10-28T00:00:00&quot;</span> <span class="s">&quot;2015-10-29T00:00:00&quot;</span> <span class="mi">100000</span> <span class="s">&quot;Description&quot;</span> <span class="s">&quot;http://URL&quot;</span> <span class="p">{</span><span class="s">&quot;type&quot;</span> <span class="p">:</span> <span class="s">&quot;vesting&quot;</span><span class="p">,</span> <span class="s">&quot;pay_vesting_period_days&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">}</span> <span class="n">false</span>
</pre></div>
</div>
<p>The URL should point to something describing your proposal. We recommend to answer the following questions:</p>
<blockquote>
<div><ul class="simple">
<li>What will you do with the funds?</li>
<li>By when will you be done?</li>
<li>For how much?</li>
</ul>
</div></blockquote>
<p>The variable <code class="docutils literal"><span class="pre">type</span></code> can be</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">refund</span></code> to return your pay back to the pool to be used for future projects,</li>
<li><code class="docutils literal"><span class="pre">vesting</span></code> to pay that you pay yourself, or</li>
<li><code class="docutils literal"><span class="pre">burn</span></code> to destroys your pay thus reducing share supply, equivalent to share buy-back of a company stock</li>
</ul>
<p>The variable <code class="docutils literal"><span class="pre">pay_vesting_period_days</span></code> is the integer number of days you set for vesting.
Some people don&#8217;t want workers to withdraw and sell large sums of BTS
immediately, as it puts sell pressure on BTS. Also, if you require vesting, you
have &#8220;skin in the game&#8221; and thus an incentive to improve BTS value. Pay is pay
per day (not hour or maintenance period) and is in units of 1/100,000 BTS (the
precision of BTS)</p>
<p>To <strong>actually</strong> generate a worker proposal, replace the last <code class="docutils literal"><span class="pre">false</span></code> by <code class="docutils literal"><span class="pre">true</span></code>.</p>
<div class="section" id="how-to-see-proposals-on-the-chain">
<h2>How to see proposals on the chain<a class="headerlink" href="#how-to-see-proposals-on-the-chain" title="Permalink to this headline">¶</a></h2>
<p>Since there is no support in the UI yet, go to <a class="reference external" href="http://cryptofresh.com/">http://cryptofresh.com/</a> and look at the worker proposal chart.
You also can inspect all the objects 1.4.*::</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">get_object</span> <span class="mf">1.14</span><span class="o">.</span><span class="mi">4</span>
<span class="go">get_object 1.14.4</span>
<span class="go">[{</span>
<span class="go">    &quot;id&quot;: &quot;1.14.4&quot;,</span>
<span class="go">    &quot;worker_account&quot;: &quot;1.2.22517&quot;,</span>
<span class="go">    &quot;work_begin_date&quot;: &quot;2015-10-21T11:00:00&quot;,</span>
<span class="go">    &quot;work_end_date&quot;: &quot;2015-11-21T11:00:00&quot;,</span>
<span class="go">    &quot;daily_pay&quot;: 1000000000,</span>
<span class="go">    &quot;worker&quot;: [</span>
<span class="go">      1,{</span>
<span class="go">        &quot;balance&quot;: &quot;1.13.235&quot;</span>
<span class="go">      }</span>
<span class="go">    ],</span>
<span class="go">    &quot;vote_for&quot;: &quot;2:73&quot;,</span>
<span class="go">    &quot;vote_against&quot;: &quot;2:74&quot;,</span>
<span class="go">    &quot;total_votes_for&quot;: &quot;14632377015617&quot;,</span>
<span class="go">    &quot;total_votes_against&quot;: 0,</span>
<span class="go">    &quot;name&quot;: &quot;bitasset-fund-pool&quot;,</span>
<span class="go">    &quot;url&quot;: &quot;https://bitsharestalk.org/index.php/topic,19317.0.html&quot;</span>
<span class="go">  }</span>
<span class="go">]</span>
</pre></div>
</div>
</div>
<div class="section" id="how-to-vote-for-a-worker">
<h2>How to Vote for a Worker<a class="headerlink" href="#how-to-vote-for-a-worker" title="Permalink to this headline">¶</a></h2>
<p>Currently the GUI doesn&#8217;t have an interface, but you an vote using the CLI::</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">update_worker_votes</span> <span class="n">your</span><span class="o">-</span><span class="n">account</span> <span class="p">{</span><span class="s">&quot;vote_for&quot;</span><span class="p">:[</span><span class="s">&quot;proposal-id&quot;</span><span class="p">]}</span> <span class="n">true</span>
</pre></div>
</div>
<p>for example::</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">update_worker_votes</span> <span class="s">&quot;awesomebitsharer&quot;</span> <span class="p">{</span><span class="s">&quot;vote_for&quot;</span><span class="p">:[</span><span class="s">&quot;1.4.0&quot;</span><span class="p">]}</span> <span class="n">true</span>
</pre></div>
</div>
<p>you can also vote against or abstain (remove your vote for or against):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">update_worker_votes</span> <span class="n">your</span><span class="o">-</span><span class="n">account</span> <span class="p">{</span><span class="s">&quot;vote_against&quot;</span><span class="p">:[</span><span class="s">&quot;proposal-id&quot;</span><span class="p">]}</span> <span class="n">true</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">update_worker_votes</span> <span class="n">your</span><span class="o">-</span><span class="n">account</span> <span class="p">{</span><span class="s">&quot;vote_abstain&quot;</span><span class="p">:[</span><span class="s">&quot;proposal-id&quot;</span><span class="p">]}</span> <span class="n">true</span>
</pre></div>
</div>
</div>
<div class="section" id="how-workers-get-paid">
<h2>How Workers Get Paid<a class="headerlink" href="#how-workers-get-paid" title="Permalink to this headline">¶</a></h2>
<p>Every hour the worker budget is processed and workers are paid in full order of
the number of votes for minus the number of votes against. The last worker to
get paid will be paid with whatever is left, so may receive partial payment. The
daily budget can be estimated by inspecting the most recent budget object 2.13.*
for example::</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">get_object</span> <span class="mf">2.13</span><span class="o">.</span><span class="mi">361</span>
<span class="go">get_object 2.13.361</span>
<span class="go">[{</span>
<span class="go">    &quot;id&quot;: &quot;2.13.361&quot;,</span>
<span class="go">    &quot;time&quot;: &quot;2015-10-28T15:00:00&quot;,</span>
<span class="go">    &quot;record&quot;: {</span>
<span class="go">      &quot;time_since_last_budget&quot;: 3600,</span>
<span class="go">      &quot;from_initial_reserve&quot;: &quot;106736452914941&quot;,</span>
<span class="go">      &quot;from_accumulated_fees&quot;: 15824269,</span>
<span class="go">      &quot;from_unused_witness_budget&quot;: 2250000,</span>
<span class="go">      &quot;requested_witness_budget&quot;: 180000000,</span>
<span class="go">      &quot;total_budget&quot;: 1520913100,</span>
<span class="go">      &quot;witness_budget&quot;: 180000000,</span>
<span class="go">      &quot;worker_budget&quot;: 1340913100,</span>
<span class="go">      &quot;leftover_worker_funds&quot;: 0,</span>
<span class="go">      &quot;supply_delta&quot;: 1502838831</span>
<span class="go">    }</span>
<span class="go">  }</span>
<span class="go">]</span>
</pre></div>
</div>
<p>So the daily budget is:</p>
<div class="highlight-python"><div class="highlight"><pre>worker_budget*24 = 1340913100 * 24 = 32181914400 (or 321,8191.44 BTS)
</pre></div>
</div>
<p>There is currently a maximum daily worker pay of 500k BTS, and this can be found
using the <code class="docutils literal"><span class="pre">get_global_properties</span></code> command in the cli_wallet</p>
</div>
<div class="section" id="technical-details">
<h2>Technical Details<a class="headerlink" href="#technical-details" title="Permalink to this headline">¶</a></h2>
<p>Every second,</p>
<div class="highlight-python"><div class="highlight"><pre>[ 17/(2^32) * reserve fund ]
</pre></div>
</div>
<p>is allocated for witnesses and workers. The reserve fund is maximum number of
BTS available less those currently in circulation (<a class="reference external" href="https://github.com/cryptonomex/graphene/blob/f85dec1c23f6bf9259ad9f15311b2e4aac4f9d44/libraries/chain/include/graphene/chain/config.hpp">source</a>)</p>
<p>Every hour the total available reserve fund is calculated by finding how many
BTS are available to be distributed and how many BTS will be returned to the
reserve fund (i.e., &#8220;burnt&#8221;) during the next maintenance interval.</p>
<p>First find how many BTS have not been distributed::</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">from_initial_reserve</span> <span class="o">=</span> <span class="n">max_supply</span> <span class="o">-</span> <span class="n">current</span> <span class="n">supply</span> <span class="n">of</span> <span class="n">BTS</span>
</pre></div>
</div>
<p>The max_supply can be obtained by:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">get_object</span> <span class="mf">1.3</span><span class="o">.</span><span class="mi">0</span>
</pre></div>
</div>
<p>and the current_supply is given in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">get_object</span> <span class="mf">2.3</span><span class="o">.</span><span class="mi">0</span>
</pre></div>
</div>
<p>Modify it by adding the accumulated fees and witness budget remaining
(i.e., 1.5 BTS per block is budgeted, so budget remaining is 1.5 BTS * (number
of blocks left in maintenance period+blocks missed by witnesses)) in this
maintenance cycle (they will be added to the &#8220;reserve fund&#8221; permanently at
maintenance):</p>
<div class="highlight-python"><div class="highlight"><pre>updated reserve fund = from_initial_reserve + from_accumulated_fees + from_unused_witness_budget
</pre></div>
</div>
<p>variables all from: <code class="docutils literal"><span class="pre">get_object</span> <span class="pre">2.13.*</span></code> (choose the most recent one, for example)</p>
<p>Next calculate how much is available to be spent on workers and witnesses is::</p>
<div class="highlight-python"><div class="highlight"><pre>total_budget = (updated reserve fund)*(time_since_last_budget)*17/(2^32)
</pre></div>
</div>
<p>rounded up to the nearest integer</p>
<p>Ok, now to find how much workers will get in this budget period (1 hour), you
find the smaller of the available pay AFTER subtracting witness budget from the
<code class="docutils literal"><span class="pre">total_budget</span></code> OR the <code class="docutils literal"><span class="pre">worker_budget_per_day/24</span></code> from <code class="docutils literal"><span class="pre">get_global_properties</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">worker_budget</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span> <span class="n">total_budget</span> <span class="o">-</span> <span class="n">witness_budget</span> <span class="p">,</span> <span class="n">worker_budget_per_day</span> <span class="o">/</span> <span class="mi">24</span> <span class="p">)</span>
</pre></div>
</div>
<p>That is how much per hour allocated for all workers. NOW you rank each worker
and pay them one hours worth of pay in order or # votes.</p>
</div>
</div>


  </div>
 </div>

 <script>var HN=[];HN.factory=function(e){return function(){HN.push([e].concat(Array.prototype.slice.call(arguments,0)))};},HN.on=HN.factory("on"),HN.once=HN.factory("once"),HN.off=HN.factory("off"),HN.emit=HN.factory("emit"),HN.load=function(){var e="hn-button.js";if(document.getElementById(e))return;var t=document.createElement("script");t.id=e,t.src="//hn-button.herokuapp.com/hn-button.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)},HN.load();</script>
 <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
 </body>
</html>